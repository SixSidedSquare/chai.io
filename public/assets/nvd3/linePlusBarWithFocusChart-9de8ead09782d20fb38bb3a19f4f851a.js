nv.models.linePlusBarWithFocusChart=function(){function P(T){return T.each(function(H){function nt(e){var t=+(e=="e"),n=t?1:-1,r=q/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function rt(){c.empty()||c.extent(S),Z.data([c.empty()?C.domain():S]).each(function(e,t){var n=C(e[0])-C.range()[0],r=C.range()[1]-C(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",C(e[1])).attr("width",r<0?0:r)})}function it(){S=c.empty()?null:c.extent(),E=c.empty()?C.domain():c.extent(),_.brush({extent:E,brush:c}),rt(),n.width(F).height(I).color(H.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!H[t].disabled&&H[t].bar})),e.width(F).height(I).color(H.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!H[t].disabled&&!H[t].bar}));var t=J.select(".nv-focus .nv-barsWrap").datum(U.length?U.map(function(e,t){return{key:e.key,values:e.values.filter(function(e,t){return n.x()(e,t)>=E[0]&&n.x()(e,t)<=E[1]})}}):[{values:[]}]),r=J.select(".nv-focus .nv-linesWrap").datum(z[0].disabled?[{values:[]}]:z.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return e.x()(t,n)>=E[0]&&e.x()(t,n)<=E[1]})}}));U.length?N=n.xScale():N=e.xScale(),i.scale(N).ticks(F/100).tickSize(-I,0),i.domain([Math.ceil(E[0]),Math.floor(E[1])]),d3.transition(J.select(".nv-x.nv-axis")).call(i),d3.transition(t).call(n),d3.transition(r).call(e),J.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")"),o.scale(k).ticks(I/36).tickSize(-F,0),J.select(".nv-focus .nv-y1.nv-axis").style("opacity",U.length?1:0),u.scale(L).ticks(I/36).tickSize(U.length?0:-F,0),J.select(".nv-focus .nv-y2.nv-axis").style("opacity",z.length?1:0).attr("transform","translate("+N.range()[1]+",0)"),d3.transition(J.select(".nv-focus .nv-y1.nv-axis")).call(o),d3.transition(J.select(".nv-focus .nv-y2.nv-axis")).call(u)}var B=d3.select(this),j=this,F=(d||parseInt(B.style("width"))||960)-h.left-h.right,I=(v||parseInt(B.style("height"))||400)-h.top-h.bottom-m,q=m-p.top-p.bottom;P.update=function(){P(T)},P.container=this;if(!H||!H.length||!H.filter(function(e){return e.values.length}).length){var R=B.selectAll(".nv-noData").data([M]);return R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",h.left+F/2).attr("y",h.top+I/2).text(function(e){return e}),P}B.selectAll(".nv-noData").remove();var U=H.filter(function(e){return!e.disabled&&e.bar}),z=H.filter(function(e){return!e.bar});N=n.xScale(),C=s.scale(),k=n.yScale(),L=e.yScale(),A=r.yScale(),O=t.yScale();var W=H.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:g(e,t),y:y(e,t)}})}),X=H.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:g(e,t),y:y(e,t)}})});N.range([0,F]),C.domain(d3.extent(d3.merge(W.concat(X)),function(e){return e.x})).range([0,F]);var V=B.selectAll("g.nv-wrap.nv-linePlusBar").data([H]),$=V.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),J=V.select("g");$.append("g").attr("class","nv-legendWrap");var K=$.append("g").attr("class","nv-focus");K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y1 nv-axis"),K.append("g").attr("class","nv-y2 nv-axis"),K.append("g").attr("class","nv-barsWrap"),K.append("g").attr("class","nv-linesWrap");var Q=$.append("g").attr("class","nv-context");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","nv-barsWrap"),Q.append("g").attr("class","nv-linesWrap"),Q.append("g").attr("class","nv-brushBackground"),Q.append("g").attr("class","nv-x nv-brush"),w&&(l.width(F/2),J.select(".nv-legendWrap").datum(H.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(l),h.top!=l.height()&&(h.top=l.height(),I=(v||parseInt(B.style("height"))||400)-h.top-h.bottom-m),J.select(".nv-legendWrap").attr("transform","translate("+F/2+","+ -h.top+")")),V.attr("transform","translate("+h.left+","+h.top+")"),r.width(F).height(q).color(H.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!H[t].disabled&&H[t].bar})),t.width(F).height(q).color(H.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!H[t].disabled&&!H[t].bar}));var G=J.select(".nv-context .nv-barsWrap").datum(U.length?U:[{values:[]}]),Y=J.select(".nv-context .nv-linesWrap").datum(z[0].disabled?[{values:[]}]:z);J.select(".nv-context").attr("transform","translate(0,"+(I+h.bottom+p.top)+")"),d3.transition(G).call(r),d3.transition(Y).call(t),c.x(C).on("brush",it),S&&c.extent(S);var Z=J.select(".nv-brushBackground").selectAll("g").data([S||c.extent()]),et=Z.enter().append("g");et.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",q),et.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",q);var tt=J.select(".nv-x.nv-brush").call(c);tt.selectAll("rect").attr("height",q),tt.selectAll(".resize").append("path").attr("d",nt),s.ticks(F/100).tickSize(-q,0),J.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+A.range()[0]+")"),d3.transition(J.select(".nv-context .nv-x.nv-axis")).call(s),a.scale(A).ticks(q/36).tickSize(-F,0),J.select(".nv-context .nv-y1.nv-axis").style("opacity",U.length?1:0).attr("transform","translate(0,"+C.range()[0]+")"),d3.transition(J.select(".nv-context .nv-y1.nv-axis")).call(a),f.scale(O).ticks(q/36).tickSize(U.length?0:-F,0),J.select(".nv-context .nv-y2.nv-axis").style("opacity",z.length?1:0).attr("transform","translate("+C.range()[1]+",0)"),d3.transition(J.select(".nv-context .nv-y2.nv-axis")).call(f),l.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,H.filter(function(e){return!e.disabled}).length||H.map(function(e){return e.disabled=!1,V.selectAll(".nv-series").classed("disabled",!1),e}),T.call(P)}),_.on("tooltipShow",function(e){x&&D(e,j.parentNode)}),it()}),P}var e=nv.models.line(),t=nv.models.line(),n=nv.models.historicalBar(),r=nv.models.historicalBar(),i=nv.models.axis(),s=nv.models.axis(),o=nv.models.axis(),u=nv.models.axis(),a=nv.models.axis(),f=nv.models.axis(),l=nv.models.legend(),c=d3.svg.brush(),h={top:30,right:30,bottom:30,left:60},p={top:0,right:30,bottom:20,left:60},d=null,v=null,m=100,g=function(e){return e.x},y=function(e){return e.y},b=nv.utils.defaultColor(),w=!0,E,S=null,x=!0,T=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},N,C,k,L,A,O,M="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","brush");e.clipEdge(!0),t.interactive(!1),i.orient("bottom").tickPadding(5),o.orient("left"),u.orient("right"),s.orient("bottom").tickPadding(5),a.orient("left"),f.orient("right");var D=function(t,n){E&&(t.pointIndex+=Math.ceil(E[0]));var r=t.pos[0]+(n.offsetLeft||0),s=t.pos[1]+(n.offsetTop||0),a=i.tickFormat()(e.x()(t.point,t.pointIndex)),f=(t.series.bar?o:u).tickFormat()(e.y()(t.point,t.pointIndex)),l=T(t.series.key,a,f,t,P);nv.tooltip.show([r,s],l,t.value<0?"n":"s",null,n)};return e.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+h.left,e.pos[1]+h.top],_.tooltipShow(e)}),e.dispatch.on("elementMouseout.tooltip",function(e){_.tooltipHide(e)}),n.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+h.left,e.pos[1]+h.top],_.tooltipShow(e)}),n.dispatch.on("elementMouseout.tooltip",function(e){_.tooltipHide(e)}),_.on("tooltipHide",function(){x&&nv.tooltip.cleanup()}),P.dispatch=_,P.legend=l,P.lines=e,P.lines2=t,P.bars=n,P.bars2=r,P.xAxis=i,P.x2Axis=s,P.y1Axis=o,P.y2Axis=u,P.y3Axis=a,P.y4Axis=f,d3.rebind(P,e,"defined","size","clipVoronoi","interpolate"),P.x=function(t){return arguments.length?(g=t,e.x(t),n.x(t),P):g},P.y=function(t){return arguments.length?(y=t,e.y(t),n.y(t),P):y},P.margin=function(e){return arguments.length?(h.top=typeof e.top!="undefined"?e.top:h.top,h.right=typeof e.right!="undefined"?e.right:h.right,h.bottom=typeof e.bottom!="undefined"?e.bottom:h.bottom,h.left=typeof e.left!="undefined"?e.left:h.left,P):h},P.width=function(e){return arguments.length?(d=e,P):d},P.height=function(e){return arguments.length?(v=e,P):v},P.color=function(e){return arguments.length?(b=nv.utils.getColor(e),l.color(b),P):b},P.showLegend=function(e){return arguments.length?(w=e,P):w},P.tooltips=function(e){return arguments.length?(x=e,P):x},P.tooltipContent=function(e){return arguments.length?(T=e,P):T},P.noData=function(e){return arguments.length?(M=e,P):M},P};