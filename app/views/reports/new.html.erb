
<div class="page-header">
	<h1>New Report <small>Create a new report</small></h1>
</div>

<div class="">
	
	<%= form_for @report, :html => {:class => "", :method => @report.id ? "put" : "post"} do |f| %>
	<% @report.errors.full_messages.each do |msg| %>
	      <p><%= msg %></p>
	<% end %>
	
	  <label class="control-label">Title</label>
	  <%= f.text_field :title %>

	  <label class="control-label">Datasource</label>
	  <%= f.collection_select(:datasource_id, current_user.datasources, :id, :name) %>
 
	  <label class="control-label">Description</label>
	  <%= f.text_area :description, :size => '200x2'%>
		
	  <%= f.fields_for :config do |c| %>
	  	  <label class="control-label">Query</label>
	  	  <div class="textwrapper">
			<%= c.text_area :query, :size => '500x5', :class => 'span12 query', :value => @report.config['query'] %>
		  </div>
	  <% end %>
	
	  <label class="control-label">Report Type</label>
	  <div class="form-inline">	
	  	  <%= f.radio_button(:report_type, "table") %>
		  <%= label_tag(:table, "Table", :class=>'radio_label') %>
	
		  <%= f.radio_button(:report_type, "single_value") %>
		  <%= label_tag(:single_value, "Single Value", :class=>'radio_label') %>
	
		  <%= f.radio_button(:report_type, "bar_chart") %>
		  <%= label_tag(:bar_chart, "Bar Chart", :class=>'radio_label') %>
		
		  <%= f.radio_button(:report_type, "line_chart") %>
		  <%= label_tag(:bar_chart, "Bar and Line Chart", :class=>'radio_label') %>
		
		  <%= f.radio_button(:report_type, "pie_chart") %>
		  <%= label_tag(:bar_chart, "Pie Chart", :class=>'radio_label') %>
	  </div>  

	  <%= f.fields_for :config do |c| %>
	    <label class="control-label">Cache Time (Seconds)</label>	
	    <%= c.text_field :cache_time %>
	  <% end %>

	  <div class="form-actions">
		<%= f.submit @report.id ? "Save" : "Create", :class => 'btn btn-primary' %>
		<button type="button" class="btn">Reset</button>
	  </div>
	
	<% end %>
</div>